{"version":3,"sources":["src/ua-pqp-calculator-component.js"],"names":["BaseComponent","translate","translations","template","calculateMiles","constructor","$template","$program","$points_label","$awardmiles_label","$status_labels","connectedCallback","el_status","querySelector","forEach","status","index","el_option","document","createElement","value","innerHTML","appendChild","calculate","display","data","airlines","airports","totals","totalpqps","el_list","el_thead","$locale","status_key","$segments","segment","earning","find","item","id","el","segmentmiles","distance","toLocaleString","origin","location","destination","carrier","name","bookingClass","success","errorMessage","rdm","el_foot"],"mappings":"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","sourceRoot":"/source_map/","sourcesContent":["import BaseComponent from './base-component';\nimport translate from './helper/translate';\nimport translations from './translations';\nimport template from './templates/ua-pqp-calculator';\nimport {calculateMiles} from './programs/UA';\n\nexport default class extends BaseComponent {\n  constructor() {\n    super();\n    this.$template = template;\n    this.$program = 'UA';\n    this.$points_label =  'PQP';\n    this.$awardmiles_label = 'Award Miles';\n    this.$status_labels = ['None','Silver','Gold','Platinum', '1K'];\n\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    \n    this.el_status = this.querySelector('[name=\"status\"]');\n    this.$status_labels.forEach((status, index) => {\n      let el_option = document.createElement('option');\n      el_option.value = index;\n      el_option.innerHTML = status;\n      this.el_status.appendChild(el_option);\n    });\n  }\n\n  calculate() {\n    super.calculate();\n  }\n\n  display( { value: data, airlines, airports}, totals  ) {\n    let totalpqps = 0;\n    super.display( data );\n    this.el_list.innerHTML = '';\n\n    let el_thead = document.createElement('thead');\n\n   el_thead.innerHTML = translate(/*html*/`\n      <tr>\n        <th></th>\n        <th class=\"text-center\">__(Route)</th>\n        <th class=\"text-center\">__(Bookingclass)</th>\n        <th class=\"text-right\">${ this.$awardmiles_label ? this.$awardmiles_label : '__(Award Miles)'}</th>\n        <th class=\"text-right\">${ this.$points_label ? this.$points_label : '__(PQP)'}</th>\n      </tr>\n    `, translations[this.$locale] ? translations[this.$locale] : []);\n    this.el_list.appendChild(el_thead);\n\n    const status_key = this.el_status.value;\n\n\n    this.$segments.forEach( (segment, index) => {\n      const earning = data[index].value.totals.find( item => item.id === this.$program );\n\n     \n\nlet el = document.createElement('tr');\n        let segmentmiles = calculateMiles([segment], [data[index]]);\n        totalpqps += segmentmiles;\n        el.innerHTML = translate(/*html*/`\n        <td class=\"align-top text-vertical text-center text-xs text-grey-dark font-light\">${data[index].value.distance?.toLocaleString()} __(miles)</td>\n        <td class=\"text-center\">\n          <div class=\"grid grid-cols-1 md:grid-cols-2\">\n            <div>\n              <div><code>${segment.origin}</code></div>\n              <div class=\"text-xs text-grey-dark font-light\">${airports[segment.origin]?.location}</div>\n            </div>\n            <div>\n              <div><code>${segment.destination}</code></div>\n              <div class=\"text-xs text-grey-dark font-light\">${airports[segment.destination]?.location}</div>\n            </div>\n          </div>\n        </td>\n        <td class=\"text-center\">\n          <div class=\"grid grid-cols-1 md:grid-cols-2\">\n            <div>\n              <div><code>${segment.carrier}</code></div>\n              <div class=\"text-xs text-grey-dark font-light\">${airlines[segment.carrier]?.name}</div>\n            </div>\n            <div>\n              <div><code>${segment.bookingClass}</code></div>\n            </div>\n          </div>\n        </td>\n        <td class=\"text-right\">${ false === data[index].success ? data[index].errorMessage : `${earning ? earning.rdm[status_key]?.toLocaleString() : 0}` }</td>\n        <td class=\"text-right\">${ false === data[index].success ? data[index].errorMessage : `${data[index].value.totals[0] ? segmentmiles.toLocaleString() : 0}` }</td>\n        `, translations[this.$locale] ? translations[this.$locale] : []);\n        this.el_list.appendChild(el);\n\n\n       } );\n    let el_foot = document.createElement('tfoot');\n\n    el_foot.innerHTML = translate(/*html*/`\n      <tr>\n        <th class=\"text-right\" colspan=\"3\">__(Total)</th>\n        <th class=\"text-right\">${totals[this.$program].rdm ? totals[this.$program].rdm[status_key]?.toLocaleString() : 0}</th>\n        <th class=\"text-right\">${totalpqps.toLocaleString()}</th>\n      </tr>\n    `, translations[this.$locale] ? translations[this.$locale] : []);\n    this.el_list.appendChild(el_foot);\n\n\n  }\n}\n  "]}