{"version":3,"names":["BaseComponent","translate","translations","template","constructor","$template","$program","$points_label","$awardmiles_label","$status_labels","connectedCallback","el_status","querySelector","forEach","status","index","el_option","document","createElement","value","innerHTML","appendChild","calculate","display","data","airlines","airports","totals","totalpqps","el_list","el_thead","$locale","status_key","$segments","segment","earning","find","item","id","el","segmentmiles","calculateMiles","distance","toLocaleString","origin","location","destination","carrier","name","bookingClass","success","errorMessage","rdm","el_foot"],"sourceRoot":"/source_map/","sources":["src/ua-pqp-calculator-component.js"],"sourcesContent":["import BaseComponent from './base-component';\nimport translate from './helper/translate';\nimport translations from './translations';\nimport template from './templates/ua-pqp-calculator';\n//import {calculateMiles} from './programs/UA';\n\nexport default class extends BaseComponent {\n  constructor() {\n    super();\n    this.$template = template;\n    this.$program = 'UA';\n    this.$points_label =  'PQP';\n    this.$awardmiles_label = 'Award Miles';\n    this.$status_labels = ['None','Silver','Gold','Platinum', '1K'];\n\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    \n    this.el_status = this.querySelector('[name=\"status\"]');\n    this.$status_labels.forEach((status, index) => {\n      let el_option = document.createElement('option');\n      el_option.value = index;\n      el_option.innerHTML = status;\n      this.el_status.appendChild(el_option);\n    });\n  }\n\n  calculate() {\n    super.calculate();\n  }\n\n  display( { value: data, airlines, airports}, totals  ) {\n    let totalpqps = 0;\n    super.display( data );\n    this.el_list.innerHTML = '';\n\n    let el_thead = document.createElement('thead');\n\n   el_thead.innerHTML = translate(/*html*/`\n      <tr>\n        <th></th>\n        <th class=\"text-center\">__(Route)</th>\n        <th class=\"text-center\">__(Bookingclass)</th>\n        <th class=\"text-right\">${ this.$awardmiles_label ? this.$awardmiles_label : '__(Award Miles)'}</th>\n        <th class=\"text-right\">${ this.$points_label ? this.$points_label : '__(PQP)'}</th>\n      </tr>\n    `, translations[this.$locale] ? translations[this.$locale] : []);\n    this.el_list.appendChild(el_thead);\n\n    const status_key = this.el_status.value;\n\n\n    this.$segments.forEach( (segment, index) => {\n      const earning = data[index].value.totals.find( item => item.id === this.$program );\n\n     \n\nlet el = document.createElement('tr');\n        let segmentmiles = calculateMiles([segment], [data[index]]);\n        totalpqps += segmentmiles;\n        el.innerHTML = translate(/*html*/`\n        <td class=\"align-top text-vertical text-center text-xs text-grey-dark font-light\">${data[index].value.distance?.toLocaleString()} __(miles)</td>\n        <td class=\"text-center\">\n          <div class=\"grid grid-cols-1 md:grid-cols-2\">\n            <div>\n              <div><code>${segment.origin}</code></div>\n              <div class=\"text-xs text-grey-dark font-light\">${airports[segment.origin]?.location}</div>\n            </div>\n            <div>\n              <div><code>${segment.destination}</code></div>\n              <div class=\"text-xs text-grey-dark font-light\">${airports[segment.destination]?.location}</div>\n            </div>\n          </div>\n        </td>\n        <td class=\"text-center\">\n          <div class=\"grid grid-cols-1 md:grid-cols-2\">\n            <div>\n              <div><code>${segment.carrier}</code></div>\n              <div class=\"text-xs text-grey-dark font-light\">${airlines[segment.carrier]?.name}</div>\n            </div>\n            <div>\n              <div><code>${segment.bookingClass}</code></div>\n            </div>\n          </div>\n        </td>\n        <td class=\"text-right\">${ false === data[index].success ? data[index].errorMessage : `${earning ? earning.rdm[status_key]?.toLocaleString() : 0}` }</td>\n        <td class=\"text-right\">${ false === data[index].success ? data[index].errorMessage : `${data[index].value.totals[0] ? segmentmiles.toLocaleString() : 0}` }</td>\n        `, translations[this.$locale] ? translations[this.$locale] : []);\n        this.el_list.appendChild(el);\n\n\n       } );\n    let el_foot = document.createElement('tfoot');\n    el_foot.innerHTML = `\n      <tr>\n        <th class=\"text-right\" colspan=\"3\">Total</th>\n        <th class=\"text-right\">${totalpqps}</th>\n      </tr>\n    `;\n    this.el_list.appendChild(el_foot);\n\n\n  }\n}\n  "],"mappings":"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"}